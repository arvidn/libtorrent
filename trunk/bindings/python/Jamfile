import python ;

use-project /torrent : ../.. ;

# rule for linking the correct libraries depending
# on features and target-os
rule linking ( properties * )
{
	local result ;
	if <boost>system in $(properties)
	{
		result += <library>boost_python ;
	}

	if <boost>source in $(properties)
	{
		result += <library>/boost/python//boost_python ;
	}
	return $(result) ;
}

lib boost_python : : <name>boost_python $(library-search-path) ;

python-extension libtorrent 
  : src/module.cpp
    src/big_number.cpp
    src/fingerprint.cpp
    src/utility.cpp
    src/session.cpp
    src/entry.cpp
    src/torrent_info.cpp
    src/filesystem.cpp
    src/torrent_handle.cpp
    src/torrent_status.cpp
    src/session_settings.cpp
    src/version.cpp
    src/alert.cpp
    src/datetime.cpp
    src/extensions.cpp
    src/peer_plugin.cpp
    src/docstrings.cpp
    src/torrent.cpp
    src/peer_info.cpp
    src/ip_filter.cpp
    /torrent//torrent
  : <include>src
  : <conditional>@linking
  ;

